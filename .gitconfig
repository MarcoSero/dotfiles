[user]
	name = Marco Sero
	email = marco@marcosero.com
[credential]
	helper = osxkeychain
[core]
	excludesfile = /Users/Marco/.gitignore_global
    # editor = mvim -f --nomru -c \"au VimLeave * !open -a iTerm\"
    editor = vim

[difftool "Kaleidoscope"]
  cmd = ksdiff --partial-changeset --relative-path \"$MERGED\" -- \"$LOCAL\" \"$REMOTE\"

# If you want to set up Kaleidoscope as the default diff tool,
# then also set the following variables:
[difftool]
	prompt = false
[diff]
	tool = fugitive

[mergetool]
	prompt = false

[merge]
	tool = fugitive
	conflictstyle = diff3

[mergetool "sourcetree"]
	cmd = /Applications/SourceTree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
	trustExitCode = true

[mergetool "Kaleidoscope"]
  cmd = ksdiff --merge --output \"$MERGED\" --base \"$BASE\" -- \"$LOCAL\" \"$REMOTE\"

[heroku]
	account = personal
[push]
	default = simple

[alias]
	cleanup = "!git branch --merged | grep  -v '\\*\\|master\\|develop' | xargs -n 1 git branch -d"
    cleanupr = "!git fetch --prune ; git branch -r --merged | grep origin | grep -v '>' | grep  -v '\\*\\|master\\|develop' | xargs -L1 | cut -d"/" -f2- | xargs git push origin --delete"
    cleanupr2 = "!git branch -r --merged | awk -F'/' '/^ *origin/{if(!match($0, /(>|master)/)){print $2}}' | xargs git push origin --delete"
	cleanf = clean -d -x -f
    sidediff = icdiff --no-bold
    update-shared = !git add Shared && git commit -m 'Update Shared submodule'
    ps = "!f(){ git push --recurse-submodules=check && curl http://clients.int.yammer.com:8080/git/notifyCommit?url=$(git config --get remote.origin.url);  }; f"
    pl = "!f(){ git pull --ff-only "$@" && git submodule update --init --recursive && [ -f Podfile.lock  ] && pod install;  }; f"
    
    # Fancy logging.
    #   h = head
    #   hp = head with patch
    #   r = recent commits, only current branch
    #   ra = recent commits, all reachable refs
    #   l = all commits, only current branch
    #   la = all commits, all reachable refs
    head = !git r -1
    h = !git head
    hp = "!. ~/.githelpers && show_git_head"
    r = !GIT_NO_PAGER=1 git l -30
    ra = !git r --all
    l = "!. ~/.githelpers && pretty_git_log"
    la = !git l --all
	lg1 = log --graph --oneline --all
	lg2 = log --graph --abbrev-commit --decorate --date=relative --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all
	lg3 = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n''          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)' --all
	lg = !"git lg2"

    ds = diff --staged
    st = status -sb
    amend = commit --amend -C HEAD
    undo = reset --soft HEAD^
    ls = log --pretty=format:"%C(yellow)%h %C(blue)%ad%C(red)%d %C(reset)%s%C(green) [%cn]" --decorate --date=short
    standup = log --since '1 day ago' --oneline --author marco@marcosero.com
    graph = log --graph --pretty=format':%C(yellow)%h%Cblue%d%Creset %s %C(white) %an, %ar%Creset'

[Color]
  	diff = auto
  	status = auto
  	branch = auto
[color "status"]
  	changed = yellow
  	added = green
  	untracked = red
[help]
	autocorrect = -1

[filter "media"]
	required = true
	clean = git media clean %f
	smudge = git media smudge %f
[difftool "sourcetree"]
	cmd = opendiff \"$LOCAL\" \"$REMOTE\"
	path = 
[filter "lfs"]
	clean = git-lfs clean %f
	smudge = git-lfs smudge %f
	required = true
[mergetool "fugitive"]
	cmd = vim -f -c \"Gdiff\" \"$MERGED\"
[difftool "fugitive"]
	cmd = vim -f -c \"Gdiff\" \"$MERGED\"
